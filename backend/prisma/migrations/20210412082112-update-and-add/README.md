# Migration `20210412082112-update-and-add`

This migration has been generated by ahmed nasr at 4/12/2021, 10:21:13 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "public"."PayRollStatus" AS ENUM ('Open', 'Close')

ALTER TABLE "public"."PayRollUser" ADD COLUMN "organizationId" text   NOT NULL 

CREATE TABLE "public"."PayRoll" (
"id" text   NOT NULL ,
"name" text   NOT NULL ,
"status" "PayRollStatus"  NOT NULL ,
"date" timestamp(3)   NOT NULL ,
"payment" integer   NOT NULL ,
"organizationId" text   NOT NULL ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."PayRoll" ADD FOREIGN KEY ("organizationId")REFERENCES "public"."Organization"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210412071514-update..20210412082112-update-and-add
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -14,8 +14,13 @@
   Session
   Surgery
 }
+enum PayRollStatus {
+  Open
+  Close
+}
+
 enum PayRollTransactionType {
   Commision
   Advance
   Incentive
@@ -118,8 +123,9 @@
   userSpecialties  UserSpecialty[]
   patients         Patient[]
   inventoryItems   InventoryItem[]
   inventoryHistory InventoryHistory[]
+  PayRoll          PayRoll[]
 }
 model User {
   id                  String               @id @default(uuid())
@@ -289,8 +295,9 @@
   salary             Int
   netSalary          Int
   user               User                 @relation(fields: [userId], references: [id])
   userId             String
+  organizationId     String
   PayRollTransaction PayRollTransaction[]
 }
 model PayRollTransaction {
@@ -301,8 +308,18 @@
   payRollUser   PayRollUser            @relation(fields: [payRollUserId], references: [id])
   payRollUserId String
 }
+model PayRoll {
+  id             String        @id @default(uuid())
+  name           String
+  status         PayRollStatus
+  date           DateTime
+  payment        Int
+  organization   Organization  @relation(fields: [organizationId], references: [id])
+  organizationId String
+}
+
 model Configuration {
   id                   String  @id @default(uuid())
   user                 User    @relation(fields: [userId], references: [id])
   userId               String
```


