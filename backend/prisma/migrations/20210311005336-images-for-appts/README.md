# Migration `20210311005336-images-for-appts`

This migration has been generated by etahoon at 3/11/2021, 2:53:36 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Image" ADD COLUMN "appointmentId" text   NOT NULL 

ALTER TABLE "public"."Image" ADD FOREIGN KEY ("appointmentId")REFERENCES "public"."Appointment"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210311001731-add-more-status-to-labs..20210311005336-images-for-appts
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -187,8 +187,9 @@
   prescription     Prescription?      @relation(fields: [prescriptionId], references: [id])
   prescriptionId   String?
   appointmentLabId String?
   labs             Lab[]
+  images           Image[]
 }
 model Prescription {
   id             String        @id @default(uuid())
@@ -345,8 +346,10 @@
   patient           Patient         @relation(fields: [patientId], references: [id])
   patientId         String
   imageDefinition   ImageDefinition @relation(fields: [imageDefinitionId], references: [id])
   imageDefinitionId String
+  appointment       Appointment     @relation(fields: [appointmentId], references: [id])
+  appointmentId     String
   documents         ImageDocument[]
 }
 model MedicineHistory {
```


