datasource db {
  provider = "postgresql"
  url = "***"
}

generator client {
  provider = "prisma-client-js"
}

enum AppointmentType {
  Examination
  Followup
}

enum Sex {
  Female
  Male
}

enum Specialty {
  Dentistry
}

enum FieldType {
  Text
  Number
  LongText
}

enum PatientMembershipType {
  Primary
  Secondary
}

model Organization {
  id   String @default(uuid()) @id
  name String
}

model User {
  id             String        @default(uuid()) @id
  name           String
  email          String        @unique
  password       String
  organizationId String
  Appointment    Appointment[]
}

model Patient {
  id           String                @default(uuid()) @id
  name         String
  phoneNo      String                @unique
  type         PatientMembershipType
  appointments Appointment[]
  age          Int
  sex          Sex
}

model Appointment {
  id              String          @default(uuid()) @id
  date            DateTime        @default(now()) @unique
  type            AppointmentType
  patient         Patient         @relation(fields: [patientId], references: [id])
  patientId       String
  specialty       Specialty
  doctor          User            @relation(fields: [doctorId], references: [id])
  doctorId        String
  labs            String?         @default("[]")
  complain        String?         @default("")
  signs           String?         @default("")
  diagnosis       String?         @default("")
  treatment       String?         @default("")
  recommendations String?         @default("")
  weight          Float?          @default(-1)
  height          Float?          @default(-1)
  pulse           Float?          @default(-1)
  temp            Float?          @default(-1)
  glucoseLevel    Float?          @default(-1)
  archived        Boolean         @default(false)
}

model FieldGroup {
  id     String   @default(uuid()) @id
  name   String
  fields Field[]
  order  Int      @unique
}

model Field {
  id           String      @default(uuid()) @id
  name         String
  order        Int
  type         FieldType
  required     Boolean
  FieldGroup   FieldGroup? @relation(fields: [fieldGroupId], references: [id])
  fieldGroupId String?

  @@unique([order, fieldGroupId], name: "order_fieldGroupId_unique_constraint")
}