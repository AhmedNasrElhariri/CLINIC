# Migration `20210215023350-add-user-to-revenues-and-expenses`

This migration has been generated by etahoon at 2/15/2021, 4:33:51 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Expense" ADD COLUMN "userId" text   NOT NULL 

ALTER TABLE "public"."Revenue" ADD COLUMN "userId" text   NOT NULL 

ALTER TABLE "public"."Expense" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Revenue" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210215023123-remove-clinic-to-expense-and-revenue-relationship..20210215023350-add-user-to-revenues-and-expenses
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -131,8 +131,10 @@
   imageDefinitions    ImageDefinition[]
   medicineDefinitions MedicineDefinition[]
   patientReports      PatientReport[]
   patients            Patient[]
+  expenses            Expense[]
+  revenues            Revenue[]
 }
 model Patient {
   id               String                @id @default(uuid())
@@ -321,16 +323,20 @@
   name      String
   date      DateTime
   amount    Int
   invoiceNo String?
+  user      User     @relation(fields: [userId], references: [id])
+  userId    String
 }
 model Revenue {
   id        String   @id @default(uuid())
   name      String
   date      DateTime
   amount    Int
   invoiceNo String?
+  user      User     @relation(fields: [userId], references: [id])
+  userId    String
 }
 model Notification {
   id         String   @id @default(uuid())
```


