# Migration `20201022072239-set-realtion-to-appointmetn`

This migration has been generated by etahoon at 10/22/2020, 9:22:39 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Collection" DROP CONSTRAINT "Collection_appointmentId_fkey"

ALTER TABLE "public"."Collection" ADD FOREIGN KEY ("appointmentId")REFERENCES "public"."Appointment"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201022053405-appointment-images..20201022072239-set-realtion-to-appointmetn
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -87,22 +87,23 @@
   FamilyHistory  FamilyHistory[]
 }
 model Appointment {
-  id        String             @id @default(uuid())
-  date      DateTime           @default(now())
-  type      AppointmentType
-  patient   Patient            @relation(fields: [patientId], references: [id])
-  patientId String
-  specialty Specialty
-  doctor    User               @relation(fields: [doctorId], references: [id])
-  doctorId  String
-  labs      String?            @default("[]")
-  status    AppointmentStatus
-  data      AppointmentField[]
-  clinic    Clinic             @relation(fields: [clinicId], references: [id])
-  clinicId  String
-  notes     String?            @default("")
+  id            String             @id @default(uuid())
+  date          DateTime           @default(now())
+  type          AppointmentType
+  patient       Patient            @relation(fields: [patientId], references: [id])
+  patientId     String
+  specialty     Specialty
+  doctor        User               @relation(fields: [doctorId], references: [id])
+  doctorId      String
+  labs          String?            @default("[]")
+  status        AppointmentStatus
+  data          AppointmentField[]
+  collections   Collection[]
+  clinic        Clinic             @relation(fields: [clinicId], references: [id])
+  clinicId      String
+  notes         String?            @default("")
 }
 model View {
   id                   String       @id @default(uuid())
@@ -169,10 +170,10 @@
   collection        Collection?     @relation(fields: [collectionId], references: [id])
   collectionId      String?
   mimetype          String?
   encoding          String?
-  Clinic            Clinic[]
-  LabDocument       LabDocument[]
+  clinic            Clinic[]
+  labDocument       LabDocument[]
 }
 model Clinic {
   id                String  @id @default(uuid())
@@ -199,11 +200,11 @@
   logo           File?         @relation(fields: [logoId], references: [id])
   logoId         String?
   users          User[]        @relation(references: [id])
   organizationId String
-  Expense        Expense[]
-  Revenue        Revenue[]
-  Appointment    Appointment[]
+  expense        Expense[]
+  revenue        Revenue[]
+  appointment    Appointment[]
   sessions       Json          @default("[]")
 }
 model Week {
@@ -309,8 +310,9 @@
 }
 model Collection {
   id              String   @id @default(uuid())
-  appointment     User     @relation(fields: [appointmentId], references: [id])
+  appointment     Appointment     @relation(fields: [appointmentId], references: [id])
   appointmentId   String
   caption         String   @default("")
+  images          File[]
 }
```


