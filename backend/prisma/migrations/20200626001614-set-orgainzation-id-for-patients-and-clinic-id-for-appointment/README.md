# Migration `20200626001614-set-orgainzation-id-for-patients-and-clinic-id-for-appointment`

This migration has been generated by etahoon at 6/26/2020, 12:16:14 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Appointment" ADD COLUMN "clinicId" text  NOT NULL ;

ALTER TABLE "public"."Clinic" ALTER COLUMN "address" SET DEFAULT '',
ALTER COLUMN "doctorJobDescription" SET DEFAULT '',
ALTER COLUMN "doctorName" SET DEFAULT '',
ALTER COLUMN "doctorTitle" SET DEFAULT '',
ALTER COLUMN "phoneNo" SET DEFAULT '';

ALTER TABLE "public"."Patient" ADD COLUMN "organizationId" text  NOT NULL ;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200530085706-add-working-hours..20200626001614-set-orgainzation-id-for-patients-and-clinic-id-for-appointment
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -46,28 +46,30 @@
   name String
 }
 model User {
-  id             String        @default(uuid()) @id
+  id             String         @default(uuid()) @id
   name           String
-  email          String        @unique
+  email          String         @unique
   password       String
   organizationId String
   Appointment    Appointment[]
   View           View[]
   ViewStatus     ViewStatus[]
-  clinic         Clinic        @relation(fields: [clinicId], references: [id])
+  clinic         Clinic         @relation(fields: [clinicId], references: [id])
   clinicId       String
+  WorkingHours   WorkingHours[]
 }
 model Patient {
-  id           String                @default(uuid()) @id
-  name         String
-  phoneNo      String                @unique
-  type         PatientMembershipType
-  appointments Appointment[]
-  age          Int
-  sex          Sex
+  id             String                @default(uuid()) @id
+  name           String
+  phoneNo        String                @unique
+  type           PatientMembershipType
+  appointments   Appointment[]
+  age            Int
+  sex            Sex
+  organizationId String
 }
 model Appointment {
   id        String             @default(uuid()) @id
@@ -80,8 +82,9 @@
   doctorId  String
   labs      String?            @default("[]")
   status    AppointmentStatus
   data      AppointmentField[]
+  clinicId  String
 }
 model View {
   id                   String       @default(uuid()) @id
@@ -171,8 +174,9 @@
   weekNo Int
   year   Int
   @@unique([weekNo, year], name: "week_year_unique_constraint")
+  WorkingHours WorkingHours[]
 }
 model WorkingHours {
   id       String   @default(uuid()) @id
```


