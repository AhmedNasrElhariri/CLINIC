# Migration `20210308122720-update`

This migration has been generated by ahmed nasr at 3/8/2021, 2:27:21 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "public"."LabDocStatus" AS ENUM ('completed', 'pending')

ALTER TABLE "public"."LabDocument" ADD COLUMN "status" "LabDocStatus"  NOT NULL ,
ADD COLUMN "requiredDate" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
ADD COLUMN "resultDate" timestamp(3)   ,
ADD COLUMN "value" text   ,
ADD COLUMN "patientId" text   NOT NULL ,
ALTER COLUMN "fileId" DROP NOT NULL,
ALTER COLUMN "patientLabId" DROP NOT NULL
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210307105539-update..20210308122720-update
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -14,8 +14,13 @@
   Session
   Surgery
 }
+enum LabDocStatus {
+  completed
+  pending
+}
+
 enum AppointmentStatus {
   Scheduled
   Cancelled
   Missed
@@ -323,13 +328,18 @@
   @@unique([name, patientId], name: "name_patientId_unique_constraint")
 }
 model LabDocument {
-  id           String     @id @default(uuid())
-  file         File       @relation(fields: [fileId], references: [id])
-  fileId       String
-  patientLab   PatientLab @relation(fields: [patientLabId], references: [id])
-  patientLabId String
+  id           String       @id @default(uuid())
+  file         File?        @relation(fields: [fileId], references: [id])
+  fileId       String?
+  status       LabDocStatus
+  requiredDate DateTime     @default(now())
+  resultDate   DateTime?
+  value        String?
+  patientId    String
+  PatientLab   PatientLab?  @relation(fields: [patientLabId], references: [id])
+  patientLabId String?
 }
 model MedicineHistory {
   id           String    @id @default(uuid())
```


