# Migration `20200821064057-permissions`

This migration has been generated by etahoon at 8/21/2020, 8:40:57 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Clinic" ALTER COLUMN "address" SET DEFAULT E'\'\'',
ALTER COLUMN "doctorJobDescription" SET DEFAULT E'\'\'',
ALTER COLUMN "doctorName" SET DEFAULT E'\'\'',
ALTER COLUMN "doctorTitle" SET DEFAULT E'\'\'',
ALTER COLUMN "phoneNo" SET DEFAULT E'\'\''

ALTER TABLE "public"."User" ADD COLUMN "permissions" jsonb   NOT NULL DEFAULT '{}'

ALTER INDEX "public"."Appointment.date" RENAME TO "Appointment.date_unique"

ALTER INDEX "public"."Patient.phoneNo" RENAME TO "Patient.phoneNo_unique"

ALTER INDEX "public"."Snippet.title" RENAME TO "Snippet.title_unique"

ALTER INDEX "public"."User.email" RENAME TO "User.email_unique"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200715064727-set-invoiceno-optional..20200821064057-permissions
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -57,8 +57,9 @@
   ViewStatus     ViewStatus[]
   clinics        Clinic[]       @relation(references: [id])
   WorkingHours   WorkingHours[]
   Snippet        Snippet[]
+  permissions    Json           @default("{}")
 }
 model Patient {
   id             String                @default(uuid()) @id
```


