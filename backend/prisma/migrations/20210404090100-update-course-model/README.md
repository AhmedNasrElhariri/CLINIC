# Migration `20210404090100-update-course-model`

This migration has been generated by ahmed nasr at 4/4/2021, 11:01:00 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Course" ADD COLUMN "doctorId" text   NOT NULL 

ALTER TABLE "public"."Course" ADD FOREIGN KEY ("doctorId")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210403141255-update..20210404090100-update-course-model
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -152,9 +152,10 @@
   timing              Timing[]
   labCategories       LabCategory[]
   imageCategories     ImageCategory[]
   CourseDefinition    CourseDefinition[]
-  Course              Course[]
+  Course1             Course[]             @relation("user")
+  Course2             Course[]             @relation("doctor")
 }
 model Patient {
   id               String                @id @default(uuid())
@@ -514,12 +515,14 @@
   price              Int
   paid               Int
   patient            Patient          @relation(fields: [patientId], references: [id])
   patientId          String
-  user               User             @relation(fields: [userId], references: [id])
+  user               User             @relation("user", fields: [userId], references: [id])
   userId             String
   courseDefinition   CourseDefinition @relation(fields: [courseDefinitionId], references: [id])
   courseDefinitionId String
+  doctor             User             @relation("doctor", fields: [doctorId], references: [id])
+  doctorId           String
 }
 model ImageCategory {
   id     String @id @default(uuid())
```


