# Migration `20200715054207-add-expenses`

This migration has been generated by etahoon at 7/15/2020, 5:42:07 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Revenue" (
"amount" integer  NOT NULL ,"clinicId" text  NOT NULL ,"date" timestamp(3)  NOT NULL ,"id" text  NOT NULL ,"invoiceNo" text  NOT NULL ,"name" text  NOT NULL ,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."Clinic" ALTER COLUMN "address" SET DEFAULT '',
ALTER COLUMN "doctorJobDescription" SET DEFAULT '',
ALTER COLUMN "doctorName" SET DEFAULT '',
ALTER COLUMN "doctorTitle" SET DEFAULT '',
ALTER COLUMN "phoneNo" SET DEFAULT '';

ALTER TABLE "public"."Revenue" ADD FOREIGN KEY ("clinicId")REFERENCES "public"."Clinic"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200715045535-fix-realtionship-for-expense..20200715054207-add-expenses
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -173,8 +173,9 @@
   logoId               String?
   users                User[]    @relation(references: [id])
   organizationId       String
   Expense              Expense[]
+  Revenue              Revenue[]
 }
 model Week {
   id     String @default(uuid()) @id
@@ -246,4 +247,14 @@
   invoiceNo String
   clinic    Clinic   @relation(fields: [clinicId], references: [id])
   clinicId  String
 }
+
+model Revenue {
+  id        String   @default(uuid()) @id
+  name      String
+  date      DateTime
+  amount    Int
+  invoiceNo String
+  clinic    Clinic   @relation(fields: [clinicId], references: [id])
+  clinicId  String
+}
```


