# Migration `20201024182112-remove-composite-key-invetory-history`

This migration has been generated by etahoon at 10/24/2020, 8:21:12 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."InventoryHistory" DROP CONSTRAINT "InventoryHistory_pkey",
ADD COLUMN "id" text   NOT NULL ,
ADD PRIMARY KEY ("id")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201024175247-add-date-to-inventory-history..20201024182112-remove-composite-key-invetory-history
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -350,8 +350,9 @@
   @@id([itemId,clinicId])
 }
 model InventoryHistory {
+  id              String     @id @default(uuid())
   item            Item       @relation(fields: [itemId], references: [id])
   itemId          String
   clinic          Clinic     @relation(fields: [clinicId], references: [id])
   clinicId        String
@@ -360,6 +361,5 @@
   operation       InventoryOperation
   quantity        Int
   price           Int?
   date            DateTime
-  @@id([itemId,clinicId])
 }
```


