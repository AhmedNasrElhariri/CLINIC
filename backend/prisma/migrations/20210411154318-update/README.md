# Migration `20210411154318-update`

This migration has been generated by ahmed nasr at 4/11/2021, 5:43:18 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "public"."PayRollTransactionType" AS ENUM ('Commision', 'Advance', 'Incentive', 'Deduction', 'Salary')

CREATE TABLE "public"."PayRollTransaction" (
"id" text   NOT NULL ,
"amount" integer   NOT NULL ,
"type" "PayRollTransactionType"  NOT NULL ,
"payRollUserId" text   NOT NULL ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."PayRollTransaction" ADD FOREIGN KEY ("payRollUserId")REFERENCES "public"."PayRollUser"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210411135729-add..20210411154318-update
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -14,8 +14,16 @@
   Session
   Surgery
 }
+enum PayRollTransactionType {
+  Commision
+  Advance
+  Incentive
+  Deduction
+  Salary
+}
+
 enum LabStatus {
   Draft
   Pending
   Completed
@@ -276,14 +284,23 @@
   @@id(fileId)
 }
 model PayRollUser {
-  id     String @id @default(uuid())
-  salary Int
-  user   User   @relation(fields: [userId], references: [id])
-  userId String
+  id                 String               @id @default(uuid())
+  salary             Int
+  user               User                 @relation(fields: [userId], references: [id])
+  userId             String
+  PayRollTransaction PayRollTransaction[]
 }
+model PayRollTransaction {
+  id            String                 @id @default(uuid())
+  amount        Int
+  type          PayRollTransactionType
+  payRollUser   PayRollUser            @relation(fields: [payRollUserId], references: [id])
+  payRollUserId String
+}
+
 model Configuration {
   id                   String  @id @default(uuid())
   user                 User    @relation(fields: [userId], references: [id])
   userId               String
```


