# Migration `20200715043642-add-expense`

This migration has been generated by etahoon at 7/15/2020, 4:36:42 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Expense" (
"amount" integer  NOT NULL ,"clinicId" text  NOT NULL ,"date" timestamp(3)  NOT NULL ,"id" text  NOT NULL ,"name" text  NOT NULL ,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."Clinic" ALTER COLUMN "address" SET DEFAULT '',
ALTER COLUMN "doctorJobDescription" SET DEFAULT '',
ALTER COLUMN "doctorName" SET DEFAULT '',
ALTER COLUMN "doctorTitle" SET DEFAULT '',
ALTER COLUMN "phoneNo" SET DEFAULT '';

ALTER TABLE "public"."Expense" ADD FOREIGN KEY ("clinicId")REFERENCES "public"."Patient"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200714052103-add-patient-id-to-history..20200715043642-add-expense
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -72,8 +72,9 @@
   guardianName   String?
   pateintLab     PatientLab[]
   MedicalHistory MedicalHistory[]
   FamilyHistory  FamilyHistory[]
+  Expense        Expense[]
 }
 model Appointment {
   id        String             @default(uuid()) @id
@@ -235,4 +236,13 @@
   relative  String
   patient   Patient @relation(fields: [patientId], references: [id])
   patientId String
 }
+
+model Expense {
+  id       String   @default(uuid()) @id
+  name     String
+  date     DateTime
+  amount   Int
+  clinic   Patient  @relation(fields: [clinicId], references: [id])
+  clinicId String
+}
```


