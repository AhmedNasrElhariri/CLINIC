# Migration `20210212160926-restore-appointments`

This migration has been generated by etahoon at 2/12/2021, 6:09:26 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Appointment" DROP CONSTRAINT "Appointment_doctorId_fkey"

ALTER TABLE "public"."Appointment" DROP COLUMN "doctorId"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210212130117-add-user-id-and-appointment-id..20210212160926-restore-appointments
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -111,10 +111,9 @@
   organization        Organization         @relation(fields: [organizationId], references: [id])
   organizationId      String
   role                PermissionRole?      @relation(fields: [roleId], references: [id])
   roleId              String?
-  appointments        Appointment[]        @relation(name: "user_appointment")
-  doctors             Appointment[]        @relation("doctor_appointment")
+  appointments        Appointment[]
   views               View[]
   viewStatus          ViewStatus[]
   clinics             Clinic[]             @relation(references: [id])
   workingHours        WorkingHours[]
@@ -155,12 +154,10 @@
   date             DateTime           @default(now())
   type             AppointmentType
   patient          Patient            @relation(fields: [patientId], references: [id])
   patientId        String
-  user             User               @relation(name: "user_appointment", fields: [userId], references: [id])
+  user             User               @relation(fields: [userId], references: [id])
   userId           String
-  doctor           User               @relation(name: "doctor_appointment", fields: [doctorId], references: [id])
-  doctorId         String
   labs             String?            @default("[]")
   status           AppointmentStatus
   data             AppointmentField[]
   collections      Collection[]
```


