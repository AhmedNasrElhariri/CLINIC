# Migration `20210113002351-add-type-to-view`

This migration has been generated by etahoon at 1/13/2021, 2:23:51 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TYPE "AppointmentType" ADD VALUE 'Surgery'

ALTER TABLE "public"."View" ADD COLUMN "type" "AppointmentType"  NOT NULL DEFAULT E'Examination'
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201227130649-add-fees..20210113002351-add-type-to-view
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -11,8 +11,9 @@
   Examination
   Followup
   Urgent
   Session
+  Surgery
 }
 enum AppointmentStatus {
   Scheduled
@@ -68,31 +69,31 @@
 model Organization {
   id             String           @id @default(uuid())
   name           String
-  Item           Item[]
-  Hospital       Hospital[]
-  Surgery        Surgery[]
-  PatientSurgery PatientSurgery[]
+  item           Item[]
+  hospital       Hospital[]
+  surgery        Surgery[]
+  patientSurgery PatientSurgery[]
 }
 model User {
   id               String             @id @default(uuid())
   name             String
   email            String             @unique
   password         String
   organizationId   String
-  Appointment      Appointment[]
-  View             View[]
-  ViewStatus       ViewStatus[]
+  appointment      Appointment[]
+  view             View[]
+  viewStatus       ViewStatus[]
   clinics          Clinic[]           @relation(references: [id])
-  WorkingHours     WorkingHours[]
-  Snippet          Snippet[]
+  workingHours     WorkingHours[]
+  snippet          Snippet[]
   permissions      Json               @default("[]")
   avatar           String?
   position         Position
   events           Event[]
-  InventoryHistory InventoryHistory[]
+  inventoryHistory InventoryHistory[]
 }
 model Patient {
   id               String                @id @default(uuid())
@@ -104,12 +105,12 @@
   sex              Sex
   organizationId   String
   guardianName     String?
   pateintLab       PatientLab[]
-  MedicalHistory   MedicalHistory[]
-  FamilyHistory    FamilyHistory[]
-  InventoryHistory InventoryHistory[]
-  PatientSurgery   PatientSurgery[]
+  medicalHistory   MedicalHistory[]
+  familyHistory    FamilyHistory[]
+  inventoryHistory InventoryHistory[]
+  patientSurgery   PatientSurgery[]
 }
 model Appointment {
   id           String             @id @default(uuid())
@@ -130,15 +131,16 @@
   prescription String?            @default("")
 }
 model View {
-  id                   String       @id @default(uuid())
+  id                   String           @id @default(uuid())
   name                 String
-  user                 User         @relation(fields: [userId], references: [id])
+  type                 AppointmentType  @default(Examination)
+  user                 User             @relation(fields: [userId], references: [id])
   userId               String
   fieldGroups          FieldGroup[]
-  defaultViewsStatuses ViewStatus[] @relation("defaultView")
-  activeViewsStatuses  ViewStatus[] @relation("activeView")
+  defaultViewsStatuses ViewStatus[]     @relation("defaultView")
+  activeViewsStatuses  ViewStatus[]     @relation("activeView")
 }
 model ViewStatus {
   id            String @id @default(uuid())
@@ -229,10 +231,10 @@
   expense          Expense[]
   revenue          Revenue[]
   appointment      Appointment[]
   sessions         Json               @default("[]")
-  InventoryItem    InventoryItem[]
-  InventoryHistory InventoryHistory[]
+  inventoryItem    InventoryItem[]
+  inventoryHistory InventoryHistory[]
 }
 model Week {
   id     String @id @default(uuid())
@@ -352,10 +354,10 @@
   barcode          String?
   notes            String?
   organization     Organization       @relation(fields: [organizationId], references: [id])
   organizationId   String
-  InventoryItem    InventoryItem[]
-  InventoryHistory InventoryHistory[]
+  inventoryItems    InventoryItem[]
+  inventoryHistory InventoryHistory[]
 }
 model InventoryItem {
   quantity Int
```


